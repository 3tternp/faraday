"""fix important ws field

Revision ID: 3eb96406e88d
Revises: 0409e696eeec
Create Date: 2022-09-30 19:15:05.214519+00:00

"""
from alembic import op

# revision identifiers, used by Alembic.
revision = '3eb96406e88d'
down_revision = '0409e696eeec'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.execute("ALTER TABLE workspace DROP COLUMN IF EXISTS important")
    op.execute("ALTER TABLE host DROP COLUMN IF EXISTS important")
    op.execute("ALTER TABLE workspace ADD COLUMN important INTEGER NULL DEFAULT 0")
    op.execute("ALTER TABLE host ADD COLUMN important INTEGER NULL DEFAULT 0")
    op.execute("ALTER TABLE vulnerability DROP CONSTRAINT IF EXISTS check_vulnerability_risk")
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_column('workspace', 'important')
    op.drop_column('host', 'important')
    op.execute("ALTER TABLE host ADD COLUMN important BOOLEAN NULL DEFAULT FALSE")
    # ### end Alembic commands ###
